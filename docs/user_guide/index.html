
<!DOCTYPE HTML>
<html>
 <head>
  <meta charset="utf-8"/>
  <title>Gestion des adresses</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/github.min.css" rel="stylesheet"/>
  <link href="https://docs.3liz.org/remarkable.css" rel="stylesheet"/>
  <link href="../icon.png" rel="icon" type="image/png" >
 </head>
 <body>
 <header class="header-container" style="">
    <h1>Gestion des adresses</h1>
 </header>
 <article>
<p><a href="./../">Up</a></p><div class="toc"><span class="toctitle">Table of content</span><ul>
<li><a href="#guide-dutilisateur-pour-la-configuration-dun-projet-adresse">Guide d'utilisateur pour la configuration d'un projet Adresse</a><ul>
<li><a href="#liste-des-scripts">Liste des scripts</a></li>
<li><a href="#structuration-de-la-base-de-donnees">Structuration de la base de données</a><ul>
<li><a href="#intallation-de-la-base">Intallation de la base</a></li>
<li><a href="#mise-a-jour-de-la-base">Mise à jour de la base</a></li>
</ul>
</li>
<li><a href="#configuration-du-projet-qgis">Configuration du Projet QGIS</a><ul>
<li><a href="#recuperation-des-couches-necessaires">Récupération des couches nécessaires</a></li>
<li><a href="#application-des-styles">Application des styles</a></li>
<li><a href="#configurer-les-variables-de-projet">Configurer les variables de projet</a></li>
<li><a href="#configuration-des-proprietes-du-projet">Configuration des propriétés du projet</a></li>
<li><a href="#configuration-pour-lizmap">Configuration pour Lizmap</a></li>
<li><a href="#fonctionnalite-des-certificats-de-numerotation">Fonctionnalité des certificats de numérotation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="guide-dutilisateur-pour-la-configuration-dun-projet-adresse">Guide d'utilisateur pour la configuration d'un projet Adresse</h1>
<p>Il est nécessaire de suivre les étapes dans l'ordre afin de configurer le projet QGIS avec succès.</p>
<h2 id="liste-des-scripts">Liste des scripts</h2>
<p>Voici les différents scripts présents dans le plugin accessible via la boîte à outils.</p>
<p><img alt="adresse_toolbox" src="./adresse_toolbox.png"></p>
<h2 id="structuration-de-la-base-de-donnees">Structuration de la base de données</h2>
<h3 id="intallation-de-la-base">Intallation de la base</h3>
<p>Vous allez utiliser ce script principalement lors de la première utilisation du plugin dans un nouveau 
projet adresse. S'il s'agit d'une nouvelle version du plugin qui impacte la base de données vous utiliserez 
le prochain script.</p>
<p>Assurez-vous d'avoir au préalable créé une connexion vers votre base de données dans QGIS.
Pour cette première phase on utilise l'algorithme <strong>Installation de la structure sur la base de données</strong> 
présent dans l'onglet <strong>Structure</strong> de la <a href="#liste-des-scripts">liste des différents scripts du plugin</a>.</p>
<p><img alt="algo_install" src="../processing/gestion_adresse-create_database_structure.png"></p>
<p>Dans un premier temps vous devez sélectionner votre connexion à la base de données.
Ensuite vous avez deux cases à cocher qui vous permettent:
 * d'écraser le schéma adresse si vous en possédez déjà un 
 * d'ajouter des données de test fournies par le plugin</p>
<p>Si vous décidez d'écraser le schéma et que vous souhaitez garder vos données, veillez à faire une sauvegarde 
en amont.</p>
<h3 id="mise-a-jour-de-la-base">Mise à jour de la base</h3>
<p>Si vous disposez déjà d'une base de données adresse et qu'une nouvelle version est disponible, il faut 
utiliser le script <strong>Mise à jour de la structure de la base</strong> pour faire la mise à jour.</p>
<p><img alt="algo_upgrade" src="../processing/gestion_adresse-upgrade_database_structure.png"></p>
<p>Script simple d'utilisation il suffit de renseigner la connexion à la base de données puis de cocher la case 
pour que la mise à jour se lance lors de l'exécution.</p>
<h2 id="configuration-du-projet-qgis">Configuration du Projet QGIS</h2>
<h3 id="recuperation-des-couches-necessaires">Récupération des couches nécessaires</h3>
<p>Dans l'onglet <strong>Données</strong> de la <a href="#liste-des-scripts">liste des différents scripts du plugin</a>, il y a le 
script <strong>Chargement des couches depuis la base</strong> qui permet les différentes couches nécessaires dans le 
module adresse.</p>
<p><img alt="algo_load_data" src="../processing/gestion_adresse-load_layers.png"></p>
<p>Pour exécuter ce script correctement il suffit de renseigner la connexion à la base de données dans le 
premier paramètre, puis le schéma qui contient les couches. En l'occurrence ici normalement le schéma 
s'appelle <strong>adresse</strong>.</p>
<h3 id="application-des-styles">Application des styles</h3>
<p>Juste en dessous du script précédent il y a celui qui se nomme <strong>Chargement des styles depuis le dossier resources</strong> 
qui permet d'appliquer un style ainsi que d'appliquer les paramètres nécessaires aux couches ayant une géométrie.</p>
<p>Il ne contient pas de paramètres, il suffit juste de l'exécuter.</p>
<p><img alt="algo_load_style" src="../processing/gestion_adresse-load_styles.png"></p>
<h3 id="configurer-les-variables-de-projet">Configurer les variables de projet</h3>
<p>On trouve maintenant le script <strong>Configuration du projet</strong> présent dans l'onglet <strong>Outils</strong> de la <a href="#liste-des-scripts">liste des différents scripts du plugin</a>.</p>
<p>Celui-ci nous permet de configurer en variable globale dans le projet, les couches importantes qui concerne 
les voies et les adresses.</p>
<p><img alt="algo_config_project" src="../processing/gestion_adresse-config_project.png"></p>
<p>Ce script contient 2 paramètres, dans l'un on y met la couche <code>voie</code> et dans l'autre on renseigne la couche <code>point_adresse</code>.</p>
<h3 id="configuration-des-proprietes-du-projet">Configuration des propriétés du projet</h3>
<p>En haut à gauche de votre fenêtre QGIS vous trouverez le menu <strong>Projet</strong> dans lequel vous aurez accès aux <strong>propriétés</strong>.</p>
<p><img alt="project_properties" src="./properties_project.png"></p>
<p>Une fois dans la fenêtre <strong>Propriétés du projet</strong> vous irez dans la section <strong>QGIS Server</strong>, puis dans la 
partie <strong>Capacités WFS</strong> où vous cocherez pour les couches <code>voie</code>, <code>point_adresse</code> et <code>document</code> la case de la colonne 
<strong>Publié</strong>.</p>
<h3 id="configuration-pour-lizmap">Configuration pour Lizmap</h3>
<p>Dernière étape pour avoir un projet bien configuré il s'agit de la partie Lizmap. Il faut ouvrir le plugin. 
Nous, on s'occupera uniquement des sections <strong>Couches</strong> et <strong>Éditions  de couche</strong>, pour le reste en ce qui 
concerne les <strong>Options de carte</strong> ou les <strong>Fonds</strong> vous pouvez configurer selon vos besoins et envies.</p>
<p>Pour ce qui est des couches, pour celles sans géométrie il n'y a rien à faire alors que celles avec géométrie 
dans la partie <strong>Légende</strong> il faut cocher les cases <strong>Cochée ?</strong> et <strong>Afficher dans la légende</strong>. 
Puis pour les couches <code>point_adresse</code> et <code>voie</code> on coche la case <strong>Popup</strong>.</p>
<p><img alt="lizmap_layers" src="./lizmap_layer.png"></p>
<p>Pour ce qui est de la configuration de l'édition comme on le voie sur l'image ci-dessous il suffit d'ajouter 
les couches auxquelles on permet l'édition. Pour le module Adresse cela concerne uniquement <code>voie</code>, <code>point_adresse</code> 
et <code>document</code>. Pour pouvoir ajouter une couche à l'édition il suffit de cliquer sur le bouton représentant une 
croix de couleur verte.</p>
<p><img alt="lizmap_edit" src="./lizmap_edit.png"></p>
<h3 id="fonctionnalite-des-certificats-de-numerotation">Fonctionnalité des certificats de numérotation</h3>
<p>Pour ajouter cette fonctionnalité il suffit d'utiliser l'algorithme 
<strong>Mise en place des données pour certificat de numérotation</strong>. Il dispose de 2 paramètres:</p>
<ul>
<li>La connexion à la base de données</li>
<li>Le schéma de données où sont les données du cadastre</li>
</ul>
<p><img alt="algo_certif_num" src="../processing/gestion_adresse-data_parcelle.png"></p>
<p>Une fois utilisé, de nouvelles couches apparaîtrons dans le projet. Il restera donc à enregistrer le projet
puis ouvrir le plugin Lizmap et cliquer sur le bouton appliquer pour comptabiliser les couches dans la
config Lizmap.</p>
<hr>
<p>Voilà maintenant il ne vous reste qu'à configurer votre un projet dans Lizmap web client. Vous pouvez vous 
aider de la <a href="https://docs.lizmap.com/next/fr/publish/lizmap_configuration.html">Documentation</a> de Lizmap.</p>
<p>Vous pouvez ensuite lire la documentation du <a href="https://github.com/3liz/lizmap-adresse-module">Module Adresse</a>.</p>
<hr>
  </article>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js">
  </script>
  <script>
   hljs.initHighlightingOnLoad();
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
  </script>
  <script type="text/javascript">
   MathJax.Hub.Config({"showProcessingMessages" : false,"messageStyle" : "none","tex2jax": { inlineMath: [ [ "$", "$" ] ] }});
  </script>
 </body>
</html>
